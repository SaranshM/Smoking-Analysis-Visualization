const data_set = [['Afghanistan', [92.26840928348538, 92.11745230182672, 92.21853469544554, 92.97291019620957, 94.39773570264545, 94.72310330181057, 95.32816687629357, 96.24279240362293, 97.17202197446947, 98.19865876941965, 98.89001419868487, 99.85833009467727, 99.52352388789372, 98.89703585195828, 98.59319436077226, 97.9523532235708, 97.45904080271758, 96.85883088859815, 96.30485658161967, 95.40743945219157, 94.13609612997926, 93.17068362871237, 92.08056421132349, 91.15066841299316, 90.50915340547377, 90.34641685058044, 90.02284863012152, 89.89175884473484]], ['Albania', [119.6288869767855, 123.37456627120598, 118.83742074184532, 113.34411705601522, 106.3990919332517, 106.71712290525137, 110.73663617653608, 112.5795993205366, 112.57698010524301, 111.54751749805976, 109.99450863519017, 108.18743940055856, 109.16636775516301, 110.27543152004492, 110.1766441331074, 107.74831592947102, 104.82228314989142, 100.04803669240601, 99.59947368867617, 97.81900597963917, 97.13219231312861, 97.7872101491678, 97.83619227945051, 98.32202790533184, 99.41271543212633, 99.14279271830051, 98.707915377688, 98.23611369789963]], ['Algeria', [105.03478804588254, 102.86529700119856, 101.04854403276197, 99.47844235667965, 97.18610598237608, 96.05575643884337, 94.43924857383048, 92.65099998340703, 90.63382413974594, 89.2784667174915, 87.53323473359707, 85.50740081314608, 83.46667374429836, 82.05917639030295, 79.93435719616602, 77.8771099458507, 75.80497737113834, 73.83492376915538, 71.90176316466696, 70.25728773287962, 68.59329562791935, 67.22157899967803, 65.83581696325736, 64.52648565679202, 63.338114141289246, 62.33201479685688, 61.2537676501446, 60.4118726342218]], ['American Samoa', [98.95312259347486, 98.51596183876326, 97.56828380701309, 95.71367306651231, 94.33751793114178, 92.6586697999364, 90.96665165996903, 89.18245932401803, 87.52422462353455, 86.761152936278, 84.33534391965087, 82.85151398256991, 81.69993383259575, 81.10010788903416, 80.45313377069168, 79.46445552345655, 78.50414922667612, 77.92986357165144, 77.19035780984954, 77.3288478108431, 76.75604565669275, 76.04872708310057, 75.4676513386551, 75.03767135790167, 74.32497146924874, 74.53815527738811, 74.0135853707735, 73.53796691274277]], ['Andean Latin America', [59.79597969245838, 57.9807882368369, 58.266892974477756, 57.44018465949957, 55.15571230712824, 53.91723126598545, 52.249904280549075, 50.02013058674742, 48.72496273756844, 46.298961727772486, 44.58854689284213, 42.580541407891026, 42.40038442312483, 42.2873740706316, 41.7906085874099, 41.18150224129452, 39.909720514381185, 39.08277407140308, 38.769271206940495, 38.9515834068604, 38.55073285044799, 37.42036031627434, 35.96815621577713, 34.21592723575693, 32.554435300497325, 31.30414225932065, 30.487644131989537, 29.69587160494345]], ['Andorra', [88.2118907474369, 87.76380390468911, 87.4254458538381, 85.9583300889764, 84.26654312115176, 81.99883025445482, 79.6249188940575, 77.0243757115125, 74.92795826674165, 72.90829817609422, 71.24006145589246, 69.72029407127451, 68.29167880059478, 67.83496663701753, 67.58131853247703, 66.75127438220711, 65.55632540116392, 64.77291696459008, 64.1310285041762, 63.580489600426354, 62.82235702575387, 61.588049655692444, 60.75515400420031, 60.16758241278806, 59.46582293855262, 58.55136046284962, 58.18326210355421, 57.76983270843601]], ['Angola', [147.35022082235534, 146.65415077672154, 146.23330536895156, 147.07728686385423, 147.3258248991268, 145.71697761764105, 141.75995946677102, 139.64674167097613, 142.64095335669552, 139.9260260644067, 137.998912799548, 134.18070142576303, 129.0454639796856, 126.71644456734406, 126.41508249711299, 121.5929693636188, 119.48463956328972, 115.60463268422178, 112.22464582625022, 109.82346213496129, 106.74830619185893, 104.32617124399236, 102.38559320545598, 99.33720692916154, 94.68628680394418, 92.19541010369929, 89.70029793301013, 87.57827390587333]], ['Antigua and Barbuda', [62.993753303026295, 61.49448953561458, 61.331151116718274, 61.02196934819255, 60.55716864705107, 60.464868633065265, 59.51772793341926, 58.66664308912934, 57.076006064939016, 55.856222630502025, 54.89394434754258, 53.447462803445205, 51.91043032214546, 50.592652544963144, 49.133621818707546, 47.99272599206349, 46.91239547265058, 45.45175542740177, 44.25810489970478, 43.18916741234887, 42.55579218529141, 41.87018843461276, 41.10550238992611, 40.26856936084921, 40.11292406752038, 39.3984284063276, 38.864312138801466, 38.42351040499078]], ['Argentina', [156.86530170417603, 150.51625959272707, 148.96244005048717, 142.76567052241617, 137.0345636985073, 134.98229736159848, 135.2572290661169, 135.21950607679764, 135.09286710878624, 136.04417231888166, 129.5307470631546, 129.2516906834236, 131.01894081049798, 131.45124407759639, 126.47552032112709, 123.53125499757134, 121.8897047380418, 123.76555651987937, 118.10010203953324, 116.31957934832705, 113.62239724155444, 111.96013621759984, 109.75198826596046, 107.12298693511065, 102.76889433006554, 100.64242236555918, 99.12043705746886, 96.50562687153457]], ['Armenia', [153.28850158618155, 161.9690494163799, 168.98731800671132, 171.9826212447312, 167.11970769721322, 157.0436555088466, 151.2828946121664, 142.89477602989456, 136.22812401353582, 135.033096791098, 132.22865215569382, 130.98685647898503, 132.56024450220866, 132.83771930081573, 131.35761395324943, 131.3820098886416, 131.13919070870006, 129.29897705621443, 129.18219695062692, 128.61815956428768, 127.33680375431179, 124.39014959532545, 120.36585564739708, 116.9777236561067, 116.76192615714086, 117.05108032420642, 116.4439516088026, 116.9049206813463]], ['Australasia', [138.38155035438643, 130.25209790745632, 125.86369440110072, 118.93640807823613, 115.04168772308937, 109.98758535117163, 105.66644197002404, 99.89419955321462, 94.16959890489004, 89.41306254073116, 85.28027174576572, 81.61868660870341, 79.27274912208502, 75.86888563120883, 72.52089658210072, 68.95030021523849, 66.07105203580693, 64.90908964681309, 62.70205383122948, 59.94338086994042, 57.53196713557074, 55.92053286261416, 53.528025459540245, 52.04603864886175, 51.86162116033309, 51.33454653517466, 50.78622205229625, 51.28124276959343]], ['Australia', [134.45116609219147, 126.76701571856074, 122.51562585857732, 115.58463889324057, 112.7771228346703, 106.83769902364646, 103.03645430129733, 97.72225662106054, 92.5498927851394, 87.33011146387385, 83.70087648842821, 79.918341816775, 77.55771033467462, 74.10785329270688, 70.88728907246157, 67.47115738999607, 64.54921112623482, 63.41741804721808, 61.208988462746156, 58.45280303780322, 56.13276209999816, 54.51876427995159, 52.05068004833599, 50.74737003880923, 50.75025087769288, 50.48642929450004, 50.05987286263937, 50.82643753781074]], ['Austria', [116.26163071664743, 115.94866774576337, 113.33171567906061, 111.60718712025854, 107.81201238343834, 106.33272849316604, 104.8757134905566, 101.02682633030913, 98.97251622499677, 95.8167516521695, 92.32477049813251, 87.87595427970966, 85.23626307443926, 82.23281027246377, 78.32981482431798, 75.82206966382353, 72.37579059893116, 71.46456794223093, 69.52603998292085, 70.82936024697833, 69.6212274115823, 68.4736826475127, 67.49784032884916, 66.7637789184744, 65.75998902242101, 65.37106833286899, 63.99789781921499, 63.64742712153678]], ['Azerbaijan', [123.34747320649154, 134.67162511094898, 149.79767171591163, 157.88749403015044, 168.99984218063054, 165.48689337731537, 161.76134361822724, 155.91202643489237, 151.178349870485, 146.52857960054837, 140.2118623521473, 136.8095966887346, 138.6199185714496, 140.97179865485543, 140.7100467435616, 142.04690145728978, 142.14875575459894, 138.58896859425585, 138.0724761470145, 136.96811062453577, 137.97085685712472, 138.4304504668905, 138.16128045609776, 139.15645967319034, 139.07879039723497, 138.32355027045554, 139.83810756457666, 142.20331201178095]], ['Bahamas', [63.644013309560265, 61.83737464877648, 59.95593139229875, 59.26653266940977, 59.07795567136513, 58.34833920767224, 58.64815362228913, 54.68536401113788, 52.6943315042678, 53.6266909156764, 51.649574592638, 51.45187110391832, 49.30452816686155, 47.62851817400207, 47.38686607180965, 46.09172669980067, 46.998971013258284, 45.61971261444643, 45.65108540598039, 45.82350539973311, 45.350878732851, 44.93285550608155, 44.143345574941726, 43.41389082922154, 43.4722906883124, 43.55808409525594, 43.27001898586706, 42.934320452598236]], ['Bahrain', [148.58520910769153, 147.64784759099356, 146.0215546937708, 142.0467020258369, 138.1584935338822, 133.87183345697605, 130.84636647911262, 127.10540095015664, 120.04944678084586, 110.48313914372282, 99.621828737311, 92.8206592749811, 89.41521844737609, 90.40700282412806, 87.88882283257972, 81.31720757400069, 73.40732865136054, 69.1936315360676, 63.8353130589961, 58.35649064123279, 55.00547793568682, 52.526039403148644, 50.31743727233269, 48.22130547346748, 46.78145199695723, 46.49618810910112, 46.123796360341245, 45.84639969653913]], ['Bangladesh', [162.7515438840703, 150.67421553276446, 148.5790665277599, 144.45389001948783, 140.3275100738694, 139.1790138567782, 135.20656354281883, 130.1134918648725, 125.45618374721931, 121.18171095424209, 119.63765256958114, 115.5349234451819, 111.71457338370676, 109.03442596642118, 106.21195994589868, 105.27508751084582, 105.20179207806524, 105.32306197981183, 102.46815165848646, 99.16542938848845, 97.44634107779727, 91.12055089110837, 85.25216022599393, 82.77226892042304, 83.13566318277987, 80.89705905193881, 79.50977999529725, 80.06533729194983]], ['Barbados', [55.86132271228667, 55.418546877423616, 54.95606909332489, 53.94627287566176, 54.139839820412114, 51.85367641339833, 49.91180421262187, 50.470081316176966, 49.27440157459274, 47.57586407830069, 46.31319846401735, 44.194253167906545, 44.20460933888597, 43.694634864859346, 43.59372107924733, 43.49139518246646, 41.93273008136527, 40.24491178810698, 39.17910990259196, 37.06746815225158, 36.35485224358923, 35.73841728004717, 34.89989946935804, 34.64041061109292, 34.61795904863391, 34.58870047880695, 34.36665674598488, 34.30293608420899]], ['Belarus', [162.002897262405, 167.40161762464808, 174.02272776701835, 190.07266781505973, 191.31333292173832, 197.69621151181326, 194.84752221196518, 194.53246929228473, 198.25003181090497, 201.16468394512623, 188.9299629253563, 196.9995397180913, 204.1251405346136, 195.69156643652806, 190.17419133792575, 193.55089076047042, 184.96038461888543, 174.04714457250168, 174.92787568953693, 174.7565363724354, 177.00990898660848, 177.2803306104362, 154.89927679829808, 149.61532368609136, 144.83531629347846, 138.16749993104477, 134.8915064375491, 134.82748560339112]], ['Belgium', [154.6706532074064, 151.61338763002962, 149.8592373833506, 148.97246792903996, 146.61863214444162, 145.45504100375393, 141.86540171109704, 140.94714679812523, 139.6825971184366, 138.6205707917765, 136.44626033850912, 132.4964318381718, 130.78224319807921, 127.08024945550221, 121.45375891139595, 118.87132988238173, 113.04666587661784, 111.94370617011677, 111.23224717184698, 108.2959021730752, 104.73293291473458, 102.56279131997705, 100.92956384420036, 97.40333668704751, 92.04122775163, 90.35753658748969, 86.3648649063336, 84.06373590155661]]]


const ages_x = [16.261782026139258, 298.32653444814656, 1073.2210721940044]
const ages_y = ["15-49 years old","50-69 years old","70+ years old"]

let final_data_set = []

function getRandomColor() {
    var letters = '0123456789ABCDEF';
    var color = '#';
    for (var i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}

for(let i=0;i<data_set.length;i++) {
    const color = getRandomColor()
    console.log(color)
    const obj = {
        label: data_set[i][0],
        data: data_set[i][1],
        backgroundColor: [
            "transparent"
        ],
        borderColor: [
            color
        ],
        borderWidth: 2
    }

    final_data_set.push(obj)
}

console.log(final_data_set)

const death_rate = document.getElementById("death_rate")
const death_age_rate = document.getElementById("death_age_rate")
const years = [1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017]

death_rate.addEventListener("click",() => {
    if (myChart) {
        myChart.destroy();
    }
    if (myChart2) {
        myChart2.destroy();
    }
    document.getElementById("cancer_deaths").style.display = "none";
    document.getElementById("bubble").style.display = "none";
    document.getElementsByClassName("up")[0].style.display = "none";
    document.getElementsByClassName("down")[0].style.display = "none";
    document.getElementsByClassName("up")[1].style.display = "none";
    document.getElementsByClassName("down")[1].style.display = "none";
    document.getElementsByClassName("analysis")[0].style.display = "none";
    document.getElementsByClassName("analysis")[1].style.display = "none";
    document.getElementsByClassName("analysis")[2].style.display = "none";
    document.getElementsByClassName("analysis")[3].style.display = "none";
    document.getElementsByTagName("canvas")[0].style.display = "block";
    document.getElementsByTagName("canvas")[1].style.display = "none";
    var ctx = document.getElementById('myChart').getContext('2d');
    myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: years,
            datasets: final_data_set
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            },
            responsive: false
        }
    });

    document.getElementsByClassName("analysis")[2].style.display = "block";
    document.getElementsByClassName("analysis")[2].innerHTML = "Death rates from smoking are highest across Asia and Eastern Europe:<br><br>In the interactive map we show death rates from tobacco smoking across the world. Death rates measure the number of premature deaths from smoking per 100,000 people in a given country or region.<br><br>We see large differences in death rates across the world. Rates tend to be highest across Asia and Eastern Europe, where figures are often over 100, and in some cases over 150 deaths per 100,000 people.<br><br>Across some of the lowest-income countries in the world, such as Sudan or Nigeria where very few people smoke, death rates are around ten times lower."
})

death_age_rate.addEventListener("click",() => {
    if (myChart) {
        myChart.destroy();
    }
    if (myChart2) {
        myChart2.destroy();
    }
    document.getElementById("cancer_deaths").style.display = "none";
    document.getElementById("bubble").style.display = "none";
    document.getElementsByClassName("up")[0].style.display = "none";
    document.getElementsByClassName("down")[0].style.display = "none";
    document.getElementsByClassName("up")[1].style.display = "none";
    document.getElementsByClassName("down")[1].style.display = "none";
    document.getElementsByClassName("analysis")[0].style.display = "none";
    document.getElementsByClassName("analysis")[1].style.display = "none";
    document.getElementsByClassName("analysis")[2].style.display = "none";
    document.getElementsByClassName("analysis")[3].style.display = "none";
    document.getElementsByTagName("canvas")[0].style.display = "block";
    document.getElementsByTagName("canvas")[1].style.display = "none";
    var ctx = document.getElementById('myChart').getContext('2d')
    myChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ages_y,
            datasets: [{
                label: '# of Votes',
                data: ages_x,
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            },
            responsive: false
        }
    });
    document.getElementsByClassName("analysis")[2].style.display = "block";
    document.getElementsByClassName("analysis")[2].innerHTML = "Most deaths from smoking occur in older populations:<br><br>When we look at the breakdown of deaths from smoking by age we see that it is mainly older populations that are affected.<br><br>In the visualizations we show the death rates from smoking by age category, and the share of annual deaths which occur in each age group.<br><br>Here we see that death rates from smoking are much higher in people older than 70 years old, followed by those aged 50 to 69. Death rates for younger adults and children are very low.<br><br>This is also reflected in the number of deaths by age: in 2017 just over half of the people who died prematurely from smoking were older than 70 years old, and around 93% were older than 50 years."
})


